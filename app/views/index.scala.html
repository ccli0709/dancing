@(params: forms.PageParams, formRows: List[Form[forms.AnniversaryForm]], formData: Form[forms.AnniversaryForm])
@main(params) { } {

<div class="row marketing">
	<div class="col-lg-12">

		<table class="table table-striped">
			@for(form <- formRows) {
			<tr>
				<td style='width: 140px'>@form("name").value</td>
				<td style='width: 140px'>@form("date").value</td>
				<td>@form("passedDays").value</td>
				@if("ccli0709@gmail.com".equals(params.getString("connected"))) {
				<td>
					<form
						action="@routes.Application.post()"
						method="post">
						<input
							type="hidden"
							name="id"
							value='@form("id").value' />
						<button
							type="submit"
							name="_action"
							value="delete"
							class="btn btn-danger btnsDelete">刪除</button>
					</form>
				</td>
				}
			</tr>

			}
			<form
				action="@routes.Application.post()"
				method="post">
			<tr>
				<td>
					<input
						type="text"
						name="name"
						class="form-control"
						value='@formData("name").value'>
					@for(err <- formData("name").errors) {
					<div
						class="alert alert-danger"
						role="alert"
						style="margin: 0.5em 0 0 0; padding: 0.5em">@Messages(err.message, err.arguments())</div>
					}
				</td>
				<td>
					<input
						type="text"
						name="date"
						class="form-control"
						value='@formData("date").value'>
					@for(err <- formData("date").errors) {
					<div
						class="alert alert-danger"
						role="alert"
						style="margin: 0.5em 0 0 0; padding: 0.5em">@Messages(err.message, err.arguments())</div>
					}
				</td>
				<td></td>
				@if("ccli0709@gmail.com".equals(params.getString("connected"))) {
				<td>
					<button
						type="submit"
						name="_action"
						value="create"
						class="btn btn-primary">新增</button>
				</td>
				}
			</tr>
			</form>
		</table>
	</div>
</div>
} {
<script>
	$(function() {
		$(".btnsDelete").click(
				function() {
					var _form = $(this).parent();
					bootbox.confirm("確定要刪除這筆資料嗎?", function(result) {
						if (result) {
							$('<input />').attr('type', 'hidden').attr(
									'name', "_action")
									.attr('value', "delete").appendTo(_form);
							_form.submit();
						}
					});

					return false;
				});

	});
</script>
}
